(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4224],{8917:function(e,t,n){"use strict";n.d(t,{m3:function(){return pe},dl:function(){return Oe},MI:function(){return De},aX:function(){return Te},Y2:function(){return Fe}});var r,i,a,o,s=n(90022),c=n(5773),u=n(50029),l=n(16835),d=n(87794),p=n.n(d),m=n(67294),h=n(50319),f=n(31955),g=n(18123),v=n(62059),E=n(26445),b=n(4620),I=n(45830),T=n(71383),k=n(19989),_=(0,k.Ps)(r||(r=(0,T.Z)(["\n  mutation generateAuthToken($input: TokenForAuthenticationInput!) {\n    authenticateClientForToken(input: $input) {\n      token\n    }\n  }\n"]))),x=n(72707),A=(0,k.Ps)(i||(i=(0,T.Z)(["\n  mutation authenticateUserWithFacebook($input: AuthenticateFacebookUserInput!) {\n    facebookAuth: authenticateUserWithFacebook(input: $input) {\n      apiAccessToken {\n        tokenString\n        expiresAt\n      }\n      isNew\n    }\n  }\n"]))),O=n(11752),S=n(85893),C=(0,O.default)().publicRuntimeConfig,N=(0,s.Z)(g.b,{target:"e117r4x50"})("margin-bottom:",c.Dh[8],";"),y=function(e){var t=e.children,n=e.t,r=e.onSignup,i=e.onLogin,a=(0,m.useState)(null),o=a[0],s=a[1],c=(0,m.useState)(!1),d=c[0],g=c[1],T=(0,m.useContext)(x.e),k=T.initialize,O=T.isInitialized,y=T.login,R=(0,h.D)(_),j=(0,l.Z)(R,2),w=j[0],P=j[1].client,D=(0,h.D)(A),L=(0,l.Z)(D,1)[0];(0,m.useEffect)((function(){O||k()}),[k,O]);var Z=function(){var e=(0,u.Z)(p().mark((function e(t){var n,a,o,s,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({variables:{input:{clientId:C.NEXT_PUBLIC_CLIENT_ID}}});case 2:return n=e.sent,a=n.data.authenticateClientForToken,e.next=6,L({variables:{input:{token:a.token,facebookAccessToken:t.accessToken}}});case 6:return o=e.sent,s=o.data.facebookAuth,c=s.apiAccessToken.tokenString,f.Z.set("token",c,{expires:30,secure:!0,sameSite:"lax"}),e.next=12,P.resetStore();case 12:return e.next=14,(0,I.th)();case 14:if(!s.isNew){e.next=16;break}return e.abrupt("return",r({firstName:t.profile.first_name,lastName:t.profile.last_name}));case 16:(0,I.j)(b.Cjb,{method:"facebook",isNew:!1}),i();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){g(!1);var t="";t="We were unable to authenticate you on Facebook"===e.message?n("common:auth.login.facebook.errors.not_authenticated"):"We were unable to retrieve your profile from Facebook"===e.message?n("common:auth.login.facebook.errors.not_authorized"):n("common:auth.login.facebook.errors.generic"),(0,I.j)(b.Cjb,{method:"facebook",error:e.message}),s(t)};return(0,S.jsxs)(S.Fragment,{children:[o&&(0,S.jsx)(N,{variant:"error",children:o}),(0,S.jsx)(v.zx,{loading:d,disabled:!O,variant:"facebook",fullWidth:!0,leftAdornment:(0,S.jsx)(E.s,{size:24}),onClick:(0,u.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),(0,I.j)(b.pNg,{method:"facebook"}),e.prev=2,e.next=5,y();case 5:return t=e.sent,e.next=8,Z(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),U(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),children:t})]})},R=n(82090),j=n(23937),w=(0,k.Ps)(a||(a=(0,T.Z)(["\n  mutation authenticateUserWithApple($input: AuthenticateAppleUserInput!) {\n    appleAuth: authenticateUserWithApple(input: $input) {\n      apiAccessToken {\n        tokenString\n        expiresAt\n      }\n      isNew\n    }\n  }\n"]))),P=(0,O.default)().publicRuntimeConfig,D=(0,s.Z)(g.b,{target:"eny8any0"})("margin-bottom:",c.Dh[8],";"),L=function(e){var t=e.t,n=e.onSignup,r=e.onLogin,i=e.children,a=(0,m.useState)(null),o=a[0],s=a[1],c=(0,m.useState)(!1),d=c[0],g=c[1],E=(0,m.useState)(null),T=E[0],k=E[1],x=(0,j.G)("https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"),A=(0,l.Z)(x,1)[0],O=(0,h.D)(_),C=(0,l.Z)(O,2),N=C[0],y=C[1].client,L=(0,h.D)(w),Z=(0,l.Z)(L,1)[0];(0,m.useEffect)((function(){A&&window.AppleID&&(window.AppleID.auth.init({clientId:"com.ticketswap.signinwithapplewebservice",scope:"name email",redirectURI:"".concat(window.location.protocol,"//").concat(window.location.host),usePopup:!0}),k(window.AppleID.auth))}),[A,T]);var U=function(){var e=(0,u.Z)(p().mark((function e(t){var i,a,o,s,c,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({variables:{input:{clientId:P.NEXT_PUBLIC_CLIENT_ID}}});case 2:return i=e.sent,a=i.data.authenticateClientForToken,o={token:a.token,appleAccessToken:t.authorization.id_token},t.user&&(o.firstName=t.user.name.firstName,o.lastName=t.user.name.lastName),e.prev=6,e.next=9,Z({variables:{input:o}});case 9:c=e.sent,u=c.data.appleAuth,s=u,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",F({error:e.t0.message}));case 17:return l=s.apiAccessToken.tokenString,f.Z.set("token",l,{expires:30,secure:!0,sameSite:"lax"}),e.next=21,y.resetStore();case 21:return e.next=23,(0,I.th)();case 23:if(!s.isNew){e.next=25;break}return e.abrupt("return",n(t.user.name));case 25:(0,I.j)(b.Cjb,{method:"apple",isNew:s.isNew}),r();case 27:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var n=e.error;g(!1),"popup_closed_by_user"!==n&&(s(t("popup_blocked_by_browser"===n?"common:generic.popupBlocked":"common:generic.somethingWentWrong")),(0,I.j)(b.Cjb,{method:"apple",error:n}))};return(0,S.jsxs)(S.Fragment,{children:[o&&(0,S.jsx)(D,{variant:"error",children:o}),(0,S.jsx)(v.zx,{loading:d,disabled:!A,fullWidth:!0,variant:"apple",leftAdornment:(0,S.jsx)(R.A,{size:24}),onClick:(0,u.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),g(!0),(0,I.j)(b.pNg,{method:"apple"}),e.prev=3,e.next=6,T.signIn();case 6:t=e.sent,U(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),F(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),children:i})]})},Z=n(59499),U=n(50474),F=n(82580),V=n(74231),G=n(93259),M=(0,k.Ps)(o||(o=(0,T.Z)(["\n  mutation sendLoginLink($input: SendLoginLinkInput!) {\n    sendLoginLink(input: $input) {\n      errors {\n        message\n        code\n      }\n    }\n  }\n"]))),B=n(75930),z=(0,s.Z)("p",{target:"e18z44y40"})("color:",c.$_.spaceLight,";font-size:",c.JB[16],";text-align:center;margin-top:",c.Dh[16],";a{color:",c.$_.space,";}"),Y=function(e){var t=e.t;return(0,S.jsx)(z,{dangerouslySetInnerHTML:(0,B.K)(t("common:auth.login.info.terms"),{renderInline:!0,openLinksInNewTab:!0})})};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=(0,s.Z)("form",{target:"e135cihd0"})("display:grid;grid-gap:",c.Dh[8],";"),H=function(e){var t=e.t,n=e.redirectUrl,r=e.onEmailSignup,i=e.onEmailLogin,a=e.showTermsAndConditionsLabel,o=void 0===a||a,s=(0,m.useState)(null),c=s[0],d=s[1],f=(0,G.qW)().setEmail,E=(0,h.D)(M),T=(0,l.Z)(E,2),k=T[0],_=T[1].loading,x=(0,F.TA)({validationSchema:V.Ry().shape({email:V.Z_().email().required(t("common:generic.required"))}),initialValues:{email:""},validateOnChange:!1,onSubmit:function(){var e=(0,u.Z)(p().mark((function e(t){var a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,I.j)(b.pNg,{method:"email"}),e.next=3,k({variables:{input:$($({},t),{},{redirectTo:n||window.location.href})}});case 3:if(a=e.sent,!(o=a.data.sendLoginLink).errors.find((function(e){return"EMAIL_DOES_NOT_EXIST"===e.code}))){e.next=9;break}return e.next=8,f(t.email);case 8:return e.abrupt("return",r());case 9:if(!o.errors.length){e.next=12;break}return(0,I.j)(b.Cjb,{method:"email",isNew:!1,error:o.errors[0].code}),e.abrupt("return",d(o.errors[0].message));case 12:return(0,I.j)(b.Cjb,{method:"email",isNew:!1}),e.next=15,f(t.email);case 15:return e.abrupt("return",i());case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),A=x.handleChange,O=x.values,C=x.handleReset,N=x.isValid,y=x.dirty,R=x.handleSubmit;return(0,S.jsxs)(K,{onSubmit:R,children:[c&&(0,S.jsx)(g.b,{variant:"error",children:c}),(0,S.jsx)(U.II,{type:"email",name:"email",id:"email",label:t("common:auth.signupEmail.fields.email.label"),hideLabel:!0,value:O.email,onChange:A,onReset:C,placeholder:t("common:auth.login.inputs.email")}),(0,S.jsx)(v.zx,{variant:"success",type:"submit",fullWidth:!0,loading:_,disabled:!N||!y,children:t("common:auth.login.buttons.email")}),o&&(0,S.jsx)(Y,{t:t})]})},q=(0,s.Z)("p",{target:"ezptp0m1"})("text-align:center;margin-bottom:",c.Dh[16],";font-size:",c.JB[16],";color:",c.$_.spaceDark,";"),X=(0,s.Z)(g.b,{target:"ezptp0m0"})("margin-bottom:",c.Dh[16],";"),J=function(e){var t=e.t,n=(0,m.useState)(!1),r=n[0],i=n[1],a=(0,m.useContext)(x.e).isInitialized;(0,m.useEffect)((function(){a&&i(!1);var e=setTimeout((function(){a||i(!0)}),3e3);return function(){clearTimeout(e)}}),[a]);var o=f.Z.get("lastLoginMethod");return!["facebook","apple","email","google"].includes(o)?null:"facebook"===o&&r?(0,S.jsx)(X,{variant:"warning",children:t("common:auth.login.facebookUnavailable")}):"facebook"===o?(0,S.jsx)(q,{children:t("common:auth.login.method.facebook")}):"apple"===o?(0,S.jsx)(q,{children:t("common:auth.login.method.apple")}):"google"===o?(0,S.jsx)(q,{children:t("common:auth.login.method.google")}):(0,S.jsx)(q,{children:t("common:auth.login.method.email")})},Q=n(57464);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne,re=function(e){return(0,S.jsxs)(Q.t,te(te({a11yTitle:"Google"},e),{},{children:[(0,S.jsx)("path",{d:"M11.432 1.936C7.808 3.176 4.72 5.888 3 9.32a14.733 14.733 0 0 0-1.296 3.744c-.656 3.232-.2 6.68 1.288 9.624a15.015 15.015 0 0 0 4.04 4.968 14.827 14.827 0 0 0 5.408 2.728c2.48.664 5.12.648 7.616.08 2.256-.52 4.392-1.6 6.096-3.168 1.8-1.656 3.088-3.832 3.768-6.176.744-2.552.84-5.28.376-7.904h-14v5.808h8.112a7.009 7.009 0 0 1-2.976 4.6c-.984.664-2.112 1.088-3.28 1.296-1.168.2-2.384.224-3.552-.008a8.81 8.81 0 0 1-3.312-1.432 9.2 9.2 0 0 1-3.408-4.568 9.03 9.03 0 0 1 0-5.792 9.294 9.294 0 0 1 2.16-3.512 8.826 8.826 0 0 1 4.448-2.472 8.878 8.878 0 0 1 4.368.176A8.011 8.011 0 0 1 22.064 9.2L24.8 6.464c.48-.488.984-.96 1.448-1.464-1.384-1.28-3.016-2.312-4.792-2.968-3.2-1.184-6.8-1.208-10.024-.096Z",fill:"#fff"}),(0,S.jsx)("path",{d:"M11.432 1.936c3.216-1.112 6.824-1.088 10.024.088a14.46 14.46 0 0 1 4.792 2.968c-.464.504-.968.976-1.448 1.464l-2.736 2.736a8.105 8.105 0 0 0-3.208-1.888 8.785 8.785 0 0 0-4.368-.176A8.892 8.892 0 0 0 10.04 9.6a9.233 9.233 0 0 0-2.16 3.512C6.256 11.848 4.632 10.592 3 9.328c1.72-3.44 4.808-6.152 8.432-7.392Z",fill:"#EA4335"}),(0,S.jsx)("path",{d:"M1.712 13.056a14.84 14.84 0 0 1 1.296-3.744c1.624 1.264 3.248 2.52 4.88 3.784a8.976 8.976 0 0 0 0 5.792 2007.705 2007.705 0 0 1-4.872 3.784c-1.504-2.936-1.96-6.384-1.304-9.616Z",fill:"#FBBC05"}),(0,S.jsx)("path",{d:"M16.296 13.208h14c.464 2.616.36 5.344-.376 7.904-.68 2.344-1.968 4.52-3.768 6.176l-4.728-3.672a7.009 7.009 0 0 0 2.976-4.6h-8.112c.008-1.936.008-3.872.008-5.808Z",fill:"#4285F4"}),(0,S.jsx)("path",{d:"M3 22.68c1.624-1.256 3.248-2.52 4.872-3.784a9.248 9.248 0 0 0 3.408 4.568 8.865 8.865 0 0 0 3.312 1.432c1.168.24 2.376.208 3.552.008 1.168-.208 2.296-.632 3.28-1.296l4.728 3.672c-1.704 1.576-3.84 2.648-6.096 3.168-2.496.568-5.136.584-7.616-.08a14.703 14.703 0 0 1-5.408-2.728A14.981 14.981 0 0 1 3 22.68Z",fill:"#34A853"})]}))},ie=n(69675),ae=(0,k.Ps)(ne||(ne=(0,T.Z)(["\n  mutation authenticateUserWithGoogle($input: AuthenticateGoogleUserInput!) {\n    googleAuth: authenticateUserWithGoogle(input: $input) {\n      apiAccessToken {\n        tokenString\n        expiresAt\n      }\n      isNew\n    }\n  }\n"]))),oe=n(14999),se=(0,O.default)().publicRuntimeConfig,ce=(0,s.Z)(g.b,{target:"e432jyq0"})("margin-bottom:",c.Dh[8],";"),ue=function(e){var t=e.children,n=e.onLogin,r=e.onSignup,i=(0,oe.$G)().t,a=(0,m.useState)(null),o=a[0],s=a[1],c=(0,m.useState)(!1),d=c[0],g=c[1],E=(0,m.useContext)(ie.R),T=E.initialize,k=E.isInitialized,x=E.login,A=E.isAvailable,O=E.logout,C=(0,h.D)(_),N=(0,l.Z)(C,2),y=N[0],R=N[1].client,j=(0,h.D)(ae),w=(0,l.Z)(j,1)[0];(0,m.useEffect)((function(){k||T()}),[T,k]);var P=function(){var e=(0,u.Z)(p().mark((function e(t){var a,o,c,u,l,d,m,h,v,E,T;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({variables:{input:{clientId:se.NEXT_PUBLIC_CLIENT_ID}}});case 2:return a=e.sent,o=a.data.authenticateClientForToken,c=t.access_token,u=t.profile,l=u.first_name,d=u.last_name,m=o.token,e.prev=7,e.next=10,w({variables:{input:{token:m,googleAccessToken:c,firstName:l,lastName:d}}});case 10:v=e.sent,E=v.data,h=E.googleAuth,e.next=22;break;case 15:return e.prev=15,e.t0=e.catch(7),console.error(e.t0),g(!1),e.next=21,O();case 21:return e.abrupt("return",s(i("common:auth.login.google.errors.generic")));case 22:return T=h.apiAccessToken.tokenString,f.Z.set("token",T,{expires:30,secure:!0,sameSite:"lax"}),e.next=26,R.resetStore();case 26:return e.next=28,(0,I.th)();case 28:if(!h.isNew){e.next=30;break}return e.abrupt("return",r({firstName:l,lastName:d}));case 30:(0,I.j)(b.Cjb,{method:"google",isNew:!1}),n();case 32:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,u.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,I.j)(b.pNg,{method:"google"}),e.next=11;break;case 11:return g(!0),s(null),e.prev=13,e.next=16,x();case 16:t=e.sent,P(t),e.next=28;break;case 20:if(e.prev=20,e.t0=e.catch(13),g(!1),"popup_closed_by_user"!==(null===e.t0||void 0===e.t0?void 0:e.t0.error)){e.next=25;break}return e.abrupt("return");case 25:if("access_denied"!==(null===e.t0||void 0===e.t0?void 0:e.t0.error)){e.next=27;break}return e.abrupt("return",s(i("common:auth.login.google.errors.denied_permissions")));case 27:return e.abrupt("return",s(i("common:auth.login.google.errors.not_authenticated")));case 28:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(){return e.apply(this,arguments)}}();return A?(0,S.jsxs)(S.Fragment,{children:[o&&(0,S.jsx)(ce,{variant:"error",children:o}),(0,S.jsx)(v.zx,{variant:"google",loading:d,disabled:!k&&!0,leftAdornment:(0,S.jsx)(re,{size:20}),onClick:D,children:t})]}):null},le=(0,s.Z)("p",{target:"exnhaye1"})("color:",c.$_.space,";font-size:",c.JB[18],";font-weight:",c.Ue.semiBold,";display:flex;flex-basis:100%;align-items:center;margin:",c.Dh[16]," 0;justify-content:center;&::after,&::before{content:'';flex-grow:1;background:",c.$_.spaceLightest,";height:1px;font-size:0;line-height:0;}&:before{margin:0 ",c.Dh[16]," 0 0;}&:after{margin:0 0 0 ",c.Dh[16],";}"),de=(0,s.Z)("div",{target:"exnhaye0"})("display:grid;grid-gap:",c.Dh[8],";"),pe=function(e){var t=e.t,n=e.redirectUrl,r=e.onEmailLogin,i=e.onEmailSignup,a=e.onSocialLogin,o=e.onSocialSignup;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(J,{t:t}),(0,S.jsxs)(de,{children:[(0,S.jsx)(ue,{onLogin:function(){return a("google")},onSignup:function(e){return o(e,"google")},children:t("common:auth.login.buttons.google")}),(0,S.jsx)(y,{t:t,onLogin:function(){return a("facebook")},onSignup:function(e){return o(e,"facebook")},children:t("common:auth.login.buttons.facebook")}),(0,S.jsx)(L,{t:t,onLogin:function(){return a("apple")},onSignup:function(e){return o(e,"apple")},children:t("common:auth.login.buttons.apple")})]}),(0,S.jsx)(le,{children:t("common:auth.login.divider.text")}),(0,S.jsx)(H,{t:t,redirectUrl:n,onEmailLogin:r,onEmailSignup:i,showTermsAndConditionsLabel:!1}),(0,S.jsx)(Y,{t:t})]})},me=n(53877),he=n(71641),fe=n(93014),ge=n(52751),ve=n(69806),Ee=n(98147),be=(0,s.Z)(me.X,{target:"e40r7oy1"})("margin-top:",c.Dh[16],";"),Ie=(0,s.Z)(v.zx,{target:"e40r7oy0"})("margin-top:",c.Dh[24],";");var Te=function(e){var t=e.t,n=e.onSignupComplete,r=e.hide,i=e.method,a=(0,m.useState)(!1),o=a[0],s=a[1],c=(0,m.useState)(!1),d=c[0],g=c[1],v=(0,h.D)(ve.a),E=(0,l.Z)(v,1)[0],T=(0,h.D)(ge.g),k=(0,l.Z)(T,1)[0],_=(0,h.D)(Ee.$),x=(0,l.Z)(_,1)[0],A=(0,he.a)(fe.X,{skip:!f.Z.get("token")}),O=A.data,C=void 0===O?{}:O,N=A.loading,y=C.loggedInUser,R=(0,F.TA)({validationSchema:V.Ry().shape({email:V.Z_().email().required(t("common:generic.required"))}),initialValues:{email:(null===y||void 0===y?void 0:y.email)||""},isInitialValid:function(e){var t=e.validationSchema,n=e.initialValues;return t.isValidSync(n)},onSubmit:function(){var e=(0,u.Z)(p().mark((function e(t){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,s(!0),e.next=4,k({variables:{input:{userId:y.id,email:r,redirectTo:null}}});case 4:if(!d){e.next=7;break}return e.next=7,E({variables:{input:{consentType:"MARKETING",hasGivenConsent:!0}}});case 7:return(0,I.j)(b.zJ9),e.next=10,x();case 10:n();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});(0,m.useEffect)((function(){(0,I.j)(b.Cjb,{method:i,isNew:!0})}),[i]),(0,m.useEffect)((function(){Boolean(y)||N||!r||(f.Z.remove("token"),r())}),[y,N,r]);var j=R.handleSubmit,w=R.values,P=R.handleChange,D=R.handleReset,L=R.isValid;return(0,S.jsxs)("form",{onSubmit:j,children:[(0,S.jsx)(U.II,{placeholder:t("common:auth.signupFacebook.placeholder"),type:"email",name:"email",id:"email",label:t(null===(null===y||void 0===y?void 0:y.email)?"common:auth.signupFacebook.label.unknown":"common:auth.signupFacebook.label.email"),value:w.email,onChange:P,onReset:D}),(0,S.jsx)(be,{id:"marketingConsent",name:"marketingConsent",label:t("common:auth.consent.label"),onChange:function(e){return g(e.target.checked)}}),(0,S.jsx)(Ie,{variant:"success",fullWidth:!0,type:"submit",disabled:!L,loading:o,children:t(null===(null===y||void 0===y?void 0:y.email)?"common:auth.signupFacebook.button.unknown":"common:auth.signupFacebook.button.email")})]})},ke=n(43731);var _e=(0,s.Z)("p",{target:"e1lub5j81"})({name:"wehb0r",styles:"margin-top:0;text-align:center;strong{display:inline-block;}"}),xe=(0,s.Z)("div",{target:"e1lub5j80"})("display:flex;justify-content:center;align-items:center;margin-bottom:",c.Dh[32],";");var Ae,Oe=function(e){var t=e.t,n=(0,G.qW)().email;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(xe,{children:(0,S.jsx)(ke.Z,{})}),(0,S.jsx)(_e,{dangerouslySetInnerHTML:(0,B.K)(t("common:auth.loginLinkSent.info",{email:n}),{renderInline:!0,disableAutolink:!0})})]})},Se=(0,k.Ps)(Ae||(Ae=(0,T.Z)(["\n  mutation registerUserUsingEmail($input: RegisterUserUsingEmailInput!) {\n    registerUserUsingEmail(input: $input) {\n      userId\n      apiAccessToken {\n        tokenString\n        expiresAt\n      }\n      errors {\n        message\n        code\n      }\n    }\n  }\n"])));function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=(0,O.default)().publicRuntimeConfig,Re=(0,s.Z)("div",{target:"e1kjm0yx2"})("display:grid;grid-template-columns:repeat(2, 1fr);grid-gap:",c.Dh[8],";"),je=(0,s.Z)(me.X,{target:"e1kjm0yx1"})("margin:",c.Dh[16]," 0;"),we=(0,s.Z)(g.b,{target:"e1kjm0yx0"})("margin-bottom:",c.Dh[8],";"),Pe=(0,V.Ry)().shape({firstname:(0,V.Z_)().required(),lastname:(0,V.Z_)().required()}),De=function(e){var t=e.t,n=e.onSignupComplete,r=(0,m.useState)(null),i=r[0],a=r[1],o=(0,m.useState)(!1),s=o[0],c=o[1],d=(0,m.useState)(!1),g=d[0],E=d[1],T=(0,m.useRef)(),k=(0,h.D)(ve.a),x=(0,l.Z)(k,2),A=x[0],O=x[1].client,C=(0,h.D)(_),N=(0,l.Z)(C,2),y=N[0],R=N[1].loading,j=(0,h.D)(Se),w=(0,l.Z)(j,2),P=w[0],D=w[1].loading,L=(0,G.qW)().email;(0,m.useEffect)((function(){T.current.focus()}),[]);var Z=function(){var e=(0,u.Z)(p().mark((function e(t){var r,i,o,s,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),e.next=3,t.generate({variables:{input:{clientId:ye.NEXT_PUBLIC_CLIENT_ID}}});case 3:return r=e.sent,i=r.data.authenticateClientForToken.token,e.next=7,t.register({variables:{input:Ne(Ne({},t.values),{},{redirectTo:window.location.href,token:i})}});case 7:if(o=e.sent,0!==(s=o.data.registerUserUsingEmail).errors.length){e.next=24;break}return c(!0),u=s.apiAccessToken.tokenString,f.Z.set("token",u,{expires:30,secure:!0,sameSite:"lax"}),e.next=15,O.resetStore();case 15:return e.next=17,(0,I.th)();case 17:if(!g){e.next=20;break}return e.next=20,A({variables:{input:{consentType:"MARKETING",hasGivenConsent:!0}}});case 20:(0,I.j)(b.Cjb,{method:"email",isNew:!0}),n("email"),e.next=26;break;case 24:a(s.errors[0].message),(0,I.j)(b.Cjb,{method:"email",isNew:!0,error:s.errors[0].code});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=(0,F.TA)({validationSchema:Pe,initialValues:{email:L,firstname:"",lastname:""},onSubmit:function(){var e=(0,u.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z({values:t,generate:y,register:P}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),M=V.handleChange;return(0,S.jsxs)("form",{onSubmit:V.handleSubmit,children:[(0,S.jsxs)(Re,{children:[(0,S.jsx)(U.II,{label:t("common:auth.signupEmail.fields.firstname.label"),type:"text",ref:T,id:"firstname",name:"firstname",value:V.values.firstname,onChange:M}),(0,S.jsx)(U.II,{label:t("common:auth.signupEmail.fields.lastname.label"),type:"text",id:"lastname",name:"lastname",value:V.values.lastname,onChange:M})]}),(0,S.jsx)(je,{id:"marketingConsent",name:"marketingConsent",label:t("common:auth.consent.label"),onChange:function(e){return E(e.target.checked)}}),i&&(0,S.jsx)(we,{variant:"error",children:i}),(0,S.jsx)(v.zx,{variant:"success",type:"submit",fullWidth:!0,loading:R||D||s,disabled:!V.isValid,children:t("common:auth.signupEmail.button")})]})},Le=n(92777),Ze=n(82262),Ue=n(79009),Fe=new(function(){function e(){(0,Le.Z)(this,e),this.popupWindow=null,this.interval=null}return(0,Ze.Z)(e,[{key:"setupListeners",value:function(){var e=this;this.connectButton=document.querySelector(".btn-twitter-connect"),this.connectButton&&this.connectButton.addEventListener("click",(function(t){return e.onLoginClick(t)}))}},{key:"onLoginClick",value:function(e){var t=this;this.connectButton.classList.add("loading","disabled"),this.connect().then((function(e){return t.onSuccess(e)})).catch((function(){return t.onFail()})),e.preventDefault()}},{key:"connect",value:function(e,t){var n=this,r=new Promise((function(e,t){clearInterval(n.interval),n.popupWindow=(0,Ue.B)("/twitter/connect",800,600),n.interval=setInterval((0,u.Z)(p().mark((function r(){var i,a,o;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(i=n.popupWindow)||void 0===i||!i.closed){r.next=15;break}return clearInterval(n.interval),r.prev=2,r.next=5,fetch("/api/profile/twitter_status");case 5:return a=r.sent,r.next=8,a.json();case 8:return o=r.sent,r.abrupt("return",e(o));case 12:return r.prev=12,r.t0=r.catch(2),r.abrupt("return",t(r.t0));case 15:case"end":return r.stop()}}),r,null,[[2,12]])}))),1e3)}));if(!e||!t)return r;r.then(e).catch(t)}},{key:"onSuccess",value:function(e){if(e.connected)return window.location.reload();this.connectButton.classList.remove("loading","disabled")}},{key:"onFail",value:function(){this.connectButton.classList.remove("loading","disabled")}}]),e}())},43731:function(e,t,n){"use strict";var r=n(90022),i=n(5773),a=n(91937),o=n(60074),s=n(85893),c=(0,r.Z)("div",{target:"edv1tfr1"})("position:relative;color:",i.$_.earth,";background-color:",i.$_.earthLightest,";width:",i.Dh[96],";height:",i.Dh[96],";border-radius:",i.Dh[48],";display:flex;justify-content:center;align-items:center;"),u=(0,r.Z)("span",{target:"edv1tfr0"})("position:absolute;right:0;bottom:0;background-color:",i.$_.nova,";box-shadow:",i.AF.strong,";width:",i.Dh[32],";height:",i.Dh[32],";border-radius:",i.Dh[32],";display:flex;justify-content:center;align-items:center;color:",i.$_.titan,";");t.Z=function(){return(0,s.jsxs)(c,{children:[(0,s.jsx)(a.w,{size:64}),(0,s.jsx)(u,{children:(0,s.jsx)(o.M,{size:24})})]})}},79009:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var r=n(90022),i=n(5773),a=n(26445),o=n(94888),s=n(91937),c=n(85893),u=(0,r.Z)("li",{target:"en1b7rr1"})("display:inline-block;&+",(function(){return u}),"{margin-left:",i.Dh[8],";}"),l=(0,r.Z)("button",{target:"en1b7rr0"})("display:inline-block;line-height:1.75;outline:0;color:",i.$_.nova,";vertical-align:middle;width:",i.Dh[32],";height:",i.Dh[32],";border-radius:",i.Dh[16],";text-align:center;background-color:",(function(e){return e.bgColor?e.bgColor:i.$_.earth}),";");function d(e,t,n){var r=window.innerHeight/2-n/2,i=window.innerWidth/2-t/2;return window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=".concat(t,",height=").concat(n,",top=").concat(r,",left=").concat(i))}t.Z=function(e){var t=e.name,n=void 0===t?"":t,r=e.uri,p=void 0===r?{}:r;if(!p.url)return null;var m="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(p.url),"?utm_campaign=eventShare&utm_source=facebook&utm_medium=SharedFacebook"),h="".concat(n," - Buy and sell tickets \u2013 TicketSwap"),f="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(h),"&url=").concat(encodeURIComponent(p.url),"?utm_campaign=eventShare&utm_source=twitter&utm_medium=SharedTwitter"),g=encodeURIComponent("".concat(n," ").concat(p.url,"?utm_campaign=eventShare&utm_source=email&utm_medium=sharedMail"));return(0,c.jsxs)("ul",{children:[(0,c.jsx)(u,{children:(0,c.jsx)(l,{bgColor:i.$_.facebook,onClick:function(){return d(m,500,300)},children:(0,c.jsx)(a.s,{size:24})})}),(0,c.jsx)(u,{children:(0,c.jsx)(l,{bgColor:"#1da1f2",onClick:function(){return d(f,500,300)},children:(0,c.jsx)(o.t,{size:24})})}),(0,c.jsx)(u,{children:(0,c.jsx)(l,{as:"a",href:"mailto:?subject=".concat("Check out this link on TicketSwap","&body=").concat(g),children:(0,c.jsx)(s.w,{size:24})})})]})}},47435:function(e,t,n){"use strict";n.d(t,{h:function(){return s},X:function(){return c}});var r,i=n(71383),a=n(19989),o=n(87074),s=(0,a.Ps)(r||(r=(0,i.Z)(["\n  fragment userConsent on UserConsent {\n    id\n    type\n    hasGivenConsent\n  }\n"]))),c=o.Z.shape({id:o.Z.string.isRequired,type:o.Z.oneOf(["MARKETING","USER_TESTING"]).isRequired,hasGivenConsent:o.Z.bool.isRequired})},71344:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r,i=n(71383),a=(0,n(19989).Ps)(r||(r=(0,i.Z)(["\n  fragment userError on UserError {\n    message\n    code\n    field\n  }\n"])))},98147:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var r,i=n(71383),a=(0,n(19989).Ps)(r||(r=(0,i.Z)(["\n  mutation agreeWithTermsAndPrivacyPolicy {\n    AgreeWithTermsAndPrivacyPolicy {\n      user {\n        id\n        hasAgreedToLatestTermsAndPrivacyPolicy\n      }\n      errors {\n        message\n        code\n      }\n    }\n  }\n"])))},69806:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var r,i=n(71383),a=n(19989),o=n(47435),s=(0,a.Ps)(r||(r=(0,i.Z)(["\n  mutation giveConsent($input: GiveConsentInput!) {\n    giveConsent(input: $input) {\n      consents {\n        ...userConsent\n      }\n      errors {\n        code\n        message\n      }\n    }\n  }\n\n  ","\n"])),o.h)},52751:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var r,i=n(71383),a=n(19989),o=n(71344),s=(0,a.Ps)(r||(r=(0,i.Z)(["\n  mutation StartUserEmailVerification($input: StartUserEmailVerificationInput!) {\n    startUserEmailVerification(input: $input) {\n      errors {\n        ...userError\n      }\n    }\n  }\n  ","\n"])),o.w)},23937:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var r=n(67294),i=[];function a(e){var t=(0,r.useState)({loaded:!1,error:!1}),n=t[0],a=t[1];return(0,r.useEffect)((function(){if(!i.includes(e)){i.push(e);var t=document.createElement("script");t.src=e,t.async=!0;var n=function(){a({loaded:!0,error:!1})},r=function(){var n=i.indexOf(e);n>=0&&i.splice(n,1),t.remove(),a({loaded:!0,error:!0})};return t.addEventListener("load",n),t.addEventListener("error",r),document.body.appendChild(t),function(){t.removeEventListener("load",n),t.removeEventListener("error",r)}}a({loaded:!0,error:!1})}),[e]),[n.loaded,n.error]}},87074:function(e,t,n){"use strict";var r=n(45697),i=n.n(r);t.Z=i()},75930:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(87441),i=n(29238),a=n.n(i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new r.TU.Renderer;t.renderInline&&(n.paragraph=function(e){return e}),t.disableAutolink&&(n.link=function(e){return e.replace(/mailto:/g,"").replace(/^https?:\/\//g,"").replace(/www./g,"")}),t.openLinksInNewTab&&(n.link=function(e,t,n){return'<a href="'.concat(e,'" target="_blank" rel="noopener noreferrer">').concat(n,"</a>")});var i={renderer:n,gfm:!0,breaks:!0,headerIds:!0,mangle:!0,smartypants:!0,xhtml:!0},o=(0,r.TU)(e||"",i),s=a().sanitize(o,{ADD_ATTR:["target","style"]});return{__html:s}}},64067:function(e){e.exports={routeMap:{CITY:"/city/[slug]/[id]/[[...filter]]",ARTIST:"/artist/[slug]/[id]",ARTIST_EXPERIENCES:"/artist/[slug]/[id]/experiences",LOCATION:"/location/[slug]/[id]",LOCATION_EXPERIENCES:"/location/[slug]/[id]/experiences",LISTING_PAGE:"/listing/[slug]/[id]/[hash]",QUESTIONNAIRE:"/questionnaire/[id]",TAG:"/tags/[slug]/[id]",ADD_EVENT:"/event/add",EVENT_PAGE:"/event/[eventSlug]/[eventIdOrEventTypeSlug]",EVENT_INFO_PAGE:"/event/[eventSlug]/[eventIdOrEventTypeSlug]/info",EVENT_EXPERIENCES:"/event/[eventSlug]/[eventIdOrEventTypeSlug]/experiences",EVENT_TYPE_PAGE:"/event/[eventSlug]/[eventIdOrEventTypeSlug]/[eventId]/[eventTypeId]",GROUP:"/events/[id]/[slug]",SELL:"/sell/[[...eventIdentifiers]]",SELL_EVENT:"/sell/event/[eventId]/[[...eventTypeId]]",EVENT:"/sell/[draftId]/event",CREATE_EVENT:"/sell/[draftId]/create-event/[eventTitle]",RESELL:"/sell/[draftId]/resell",RESELL_TICKETS:"/sell/[draftId]/resell/tickets",FILES:"/sell/[draftId]/files",TICKET_INFO:"/sell/[draftId]/ticket-info",LISTING:"/sell/[draftId]/original-price",SELLING_PRICE:"/sell/[draftId]/selling-price",SOCIAL:"/sell/[draftId]/social",AVATAR:"/sell/[draftId]/avatar",PRIVATE:"/sell/[draftId]/private",PRIVATE_VERIFIED:"/sell/[draftId]/private/verified",PHONE_DETAILS:"/sell/[draftId]/phone-details",PAYOUT_INFORMATION:"/sell/[draftId]/payout-information",PAYOUT_CREDIT_CARD:"/sell/[draftId]/payout-credit-card",VERIFY_IDENTITY:"/sell/[draftId]/verify-identity",SUMMARY:"/sell/[draftId]/summary",SUMMARY_VERIFIED:"/sell/[draftId]/summary/verified",CONFIRM_VERIFIED:"/sell/[draftId]/confirm/verified",PUBLISH:"/sell/[draftId]/publish",PUBLISHED:"/sell/[draftId]/published",CLOSED_LOOP:"/sell/tickets/[ticketProvider]/[identifier]/[[...ticketId]]",CART:"/cart",PENDING_COUNTRY:"/checkout/country",PENDING_EMAIL:"/checkout/email",PENDING_PHONE:"/checkout/phone",PENDING_PAYMENT:"/checkout/summary",PENDING_PAYMENT_METHOD:"/checkout/payment/method",PENDING_EMAIL_VERIFICATION:"/checkout/summary",CHECKOUT_SUMMARY:"/checkout/summary",FAILED_PAYMENT:"/checkout/summary",SUCCESSFUL_PAYMENT:"/checkout/done/[hash]",PROCESSING_PAYMENT:"/checkout/payment",CANCELLED_PAYMENT:"/checkout/summary",PARTNERS:"/partners",ORGANIZERS_DASHBOARD:"/organizers/dashboard",CONTENT:"/content/[slug]",HOW_DOES_IT_WORK:"/how-does-it-work",CONTACT:"/contact/[[...action]]",HOME:"/",LOGIN:"/login",LOGOUT:"/logout",LOGO:"/logo",SEARCH:"/search/[[...params]]",PROFILE_FOR_SALE:"/tickets/for-sale",PROFILE_FOR_SALE_LISTING:"/tickets/for-sale/[id]/[hash]",BLOG:"/blog",BLOG_POST:"/blog/[slug]",CATEGORY:"/[slug]",PROFILE:"/account",CONVERSATIONS:"/conversations",CONVERSATION:"/conversations/[id]",PROFILE_VERIFY_IDENTITY:"/account/identity/verify",PROFILE_VERIFY_DOCUMENT:"/account/identity/document",CHANGE_PAYOUT_INFO:"/account/payout-information",REMOVE:"/account/remove",BOUGHT_TICKETS:"/tickets/purchased",TICKET_ALERTS:"/ticket-alerts",TICKET_ALERT:"/ticket-alert/[id]",ORGANIZER_SHOP:"/organizer-tickets/products/[shopId]",ORGANIZER_PRODUCT:"/organizer-tickets/checkout/[productId]",ORGANIZER_ORDER:"/organizer-tickets/order/completed/[orderId]",RESERVATION:"/reservation/[id]",BROWSE:"/browse/[[...period]]",UNSUBSCRIBE:"/unsubscribe/:token",UNSUBSCRIBE_FEEDBACK:"/unsubscribe/feedback",PARTNER_DASHBOARD:"/partners/dashboard",PARTNER_ORGANIZATION:"/partners/dashboard/[eventPartnerId]/[organizerBrandId]/events",PARTNER_EVENT_OVERVIEW:"/partners/dashboard/[eventPartnerId]/[organizerBrandId]/event/[eventId]",PARTNER_EVENT_EDIT:"/partners/dashboard/[eventPartnerId]/[organizerBrandId]/event/[eventId]/edit",PARTNER_EVENT_ADD:"/partners/dashboard/[eventPartnerId]/[organizerBrandId]/event/add",PARTNER_EVENT_CREATE:"/partners/dashboard/[eventPartnerId]/[organizerBrandId]/event/create",EMAIL_VERIFY:"/email/verify/[hash]/[combinedHash]",MAGIC_LINK:"/magic-link/[hash]",EXPERIENCES:"/experiences",THANK_YOU:"/thank-you-message/[id]",TICKET_PROVIDER_SELECT:"/ticket-provider/select",TICKET_PROVIDER_DASHBOARD:"/ticket-provider/[providerId]/dashboard",TICKET_PROVIDER_IMPLEMENTATION_SETUP:"/ticket-provider/[providerId]/implementation/setup",TICKET_PROVIDER_IMPLEMENTATION_TEST:"/ticket-provider/[providerId]/implementation/test",TICKET_PROVIDER_IMPLEMENTATION_PUBLISH:"/ticket-provider/[providerId]/implementation/publish",TICKET_PROVIDER_DOCUMENTATION:"/ticket-provider/[providerId]/documentation",BETA:"/account/beta",NOTIFICATIONS:"/account/notifications",NOTIFICATION:"/account/notifications/[notificationId]",ACCOUNT_VERIFY:"/account/verify",ACCOUNT_VERIFY_BASIC:"/account/verify/basic",ACCOUNT_VERIFY_IDENTITY:"/account/verify/identity",ACCOUNT_VERIFY_IDENTITY_STRIPE:"/account/verify/identity/stripe",ACCOUNT_VERIFY_DOCUMENT:"/account/verify/document",ACCOUNT_FOLLOWING:"/account/following",ACCOUNT_PAYOUTS:"/account/payouts",ACCOUNT_LANGUAGE:"/account/language",ACCOUNT_EMAIL:"/account/email",START_CASE:"/start-case/:id/:hash",CLOSE_CASE:"/close-case/:ticketId",REMOVE_TICKET_ALERT:"/ticket-alert/remove/:id/:hash",FEEDBACK_OK:"/feedback/[id]/[hash]/ok",FEEDBACK_NEGATIVE:"/feedback/[id]/[hash]",ADE:"/ade",PRE_REGISTER:"/pre-register/[slug]",APPS:"/apps",ACCOUNT_PHONE:"/account/phone",SURVEY:"/survey/:subject",SHARE:"/share/[eventName]/[shareLinkId]",REVIEWS:"/reviews",EVENT_NEW_REVIEW:"/reviews/events/[eventId]/new",ORGANIZER_PAGE:"/organizer/[slug]/[id]",CONCERTS:"/concerts",SPORTS:"/sports",CLUBS:"/clubs",FESTIVALS:"/festivals",THEATRE_AND_COMEDY:"/theatre-and-comedy",VOUCHERS_AND_DAY_OUT:"/vouchers-and-day-out",FOLLOW:"/follow/[entity]/[id]"}}}}]);
//# sourceMappingURL=4224-da7c36a9677b212f.js.map