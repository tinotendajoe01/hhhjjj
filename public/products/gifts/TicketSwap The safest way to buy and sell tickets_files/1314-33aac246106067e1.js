"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1314],{74445:function(e,t,n){n.d(t,{Z:function(){return N}});var r,i=n(59499),o=n(37839),a=n(28318),c=n(14999),s=n(50029),l=n(16835),u=n(90022),d=n(87794),f=n.n(d),m=n(82580),g=n(93259),p=n(74231),b=n(5773),h=n(18123),v=n(89265),j=n(50474),y=n(62059),x=n(71383),O=(0,n(19989).Ps)(r||(r=(0,x.Z)(["\n  mutation giveUserFeedback($input: GiveUserFeedbackInput!) {\n    giveUserFeedback(input: $input) {\n      errors {\n        code\n        field\n        message\n      }\n    }\n  }\n"]))),k=n(98371),D=n(67294),w=n(50319),P=n(85893);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,u.Z)("div",{target:"e1kmceeh2"})("display:grid;grid-gap:",b.Dh[16],";"),E=(0,u.Z)(h.b,{target:"e1kmceeh1"})("margin-top:",b.Dh[8],";"),I=(0,u.Z)("button",{target:"e1kmceeh0"})("color:",b.$_.earth,";outline:0;");var z=function(e){var t=e.t,r=e.setActiveView,i=e.hide,a=(0,D.useState)(0),c=a[0],u=a[1],d=(0,D.useState)(null),b=d[0],x=d[1],Z=(0,g.qW)().loggedInUser,z=(0,k.oG)().start,C=(0,w.D)(O),T=(0,l.Z)(C,2),$=T[0],A=T[1].loading;function V(){return 0===c?null:c<3?"NEGATIVE":"POSITIVE"}function U(){return"POSITIVE"===V()}var q=(0,m.TA)({initialValues:{email:(null===Z||void 0===Z?void 0:Z.email)||"",name:Z?"".concat(Z.firstname," ").concat(Z.lastname):"",message:""},validationSchema:p.Ry().shape({name:p.Z_().required(!Z),email:p.Z_().email().required(!Z),message:p.Z_().required("Required")}),onSubmit:function(){var e=(0,s.Z)(f().mark((function e(t){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(null),e.prev=1,e.next=4,$({variables:{input:S(S({},t),{},{rating:0===c?null:c,sentiment:V(),url:n.g.location.href})}});case 4:i=e.sent,(o=i.data.giveUserFeedback).errors.length>0&&x(o.errors[0].message),r(U()?"positive-confirm":"negative-confirm"),sessionStorage.setItem(U()?"positive_feedback_submitted":"negative_feedback_submitted",!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),x(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}),F=q.values,R=q.isValid,G=q.dirty,N=q.handleChange,W=q.handleSubmit,Y=F.message.length<3||Z&&0===c||!R||!G||A;return(0,P.jsxs)("form",{onSubmit:W,children:[(0,P.jsx)(o.a7,{children:(0,P.jsxs)(_,{children:[b&&(0,P.jsx)(h.b,{variant:"error",children:b}),Z&&(0,P.jsx)(v.Z,{label:t("common:feedbackDialog.fields.rating.label"),onChange:u}),0!==c&&!U()&&(0,P.jsxs)(E,{children:[t("common:feedbackDialog.alert.info")," ",(0,P.jsx)(I,{type:"button",onClick:function(){i(),z()},children:t("common:feedbackDialog.alert.button")})," ",t("common:feedbackDialog.alert.call")]}),!Z&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.II,{type:"text",name:"name",id:"name",label:t("common:feedbackDialog.fields.name.label"),value:F.name,onChange:N}),(0,P.jsx)(j.II,{type:"email",name:"email",id:"email",label:t("common:feedbackDialog.fields.email.label"),value:F.email,onChange:N})]}),(0,P.jsx)(j.II,{as:"textarea",rows:"6",name:"message",id:"message",label:t("common:feedbackDialog.fields.message.label"),value:F.message,onChange:N,help:Z&&t("common:feedbackDialog.fields.message.help")})]})}),(0,P.jsx)(o.cN,{children:(0,P.jsx)(y.zx,{type:"submit",fullWidth:!0,loading:A,disabled:Y,children:t("common:feedbackDialog.button")})})]})},C=n(43731);var T=(0,u.Z)("div",{target:"e1wox0yw1"})({name:"1azakc",styles:"text-align:center"}),$=(0,u.Z)("div",{target:"e1wox0yw0"})("display:flex;justify-content:center;align-items:center;margin-bottom:",b.Dh[32],";"),A=function(e){var t=e.t,n=e.hide;return(0,D.useEffect)((function(){var e=setTimeout(n,4e3);return function(){return clearTimeout(e)}}),[n]),(0,P.jsxs)(o.a7,{children:[(0,P.jsx)($,{children:(0,P.jsx)(C.Z,{})}),(0,P.jsx)(T,{children:(0,P.jsx)("p",{children:t("common:feedbackDialog.confirm.text.positive")})})]})};var V=(0,u.Z)("div",{target:"e11dtf891"})({name:"1azakc",styles:"text-align:center"}),U=(0,u.Z)("div",{target:"e11dtf890"})("display:flex;justify-content:center;align-items:center;margin-bottom:",b.Dh[32],";"),q=function(e){var t=e.t,n=e.hide;return(0,D.useEffect)((function(){var e=setTimeout(n,4e3);return function(){return clearTimeout(e)}}),[n]),(0,P.jsxs)(o.a7,{children:[(0,P.jsx)(U,{children:(0,P.jsx)(C.Z,{})}),(0,P.jsx)(V,{children:(0,P.jsx)("p",{children:t("common:feedbackDialog.confirm.text.negative")})})]})},F=n(50960);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.children,n=(0,c.$G)().t,r=(0,D.useState)(""),i=r[0],s=r[1],l=(0,D.useState)("feedback"),u=l[0],d=l[1],f=(0,o.Rh)(),m=f.hide,g=f.getToggleProps,p=f.getWindowProps;return(0,P.jsxs)(P.Fragment,{children:[t({getToggleProps:g,setActiveView:d,hide:m}),(0,P.jsxs)(o.qv,G(G({},p()),{},{children:[(0,P.jsxs)(o.fK,{children:[i,(0,P.jsx)(o.UX,{right:!0,children:(0,P.jsx)("button",{onClick:m,children:(0,P.jsx)(F.Y,{size:24})})})]}),(0,P.jsxs)(a.m,{onChange:function(e){s(e.props.title)},activeView:u,children:[(0,P.jsx)(z,{t:n,hide:m,title:n("common:feedbackDialog.title"),setActiveView:d},"feedback"),(0,P.jsx)(A,{t:n,hide:m,title:n("common:feedbackDialog.confirm.title")},"positive-confirm"),(0,P.jsx)(q,{t:n,hide:m,title:n("common:feedbackDialog.confirm.title")},"negative-confirm")]})]}))]})}},61314:function(e,t,n){var r=n(59499),i=n(90022),o=n(67294),a=n(5773),c=n(74445),s=n(99704),l=n(33522),u=n(14999),d=n(71102),f=n(85893);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=(0,i.Z)("div",{target:"e1uzspzr3"})("display:none;@media ",a.Uh.tablet,"{display:flex;flex-direction:column;position:fixed;top:50%;right:0;background-color:",a.$_.nova,";padding:",a.Dh[4],";border-radius:",a.Dh[8]," 0 0 ",a.Dh[8],";box-shadow:",a.AF.strong,";transition-duration:200ms;transition-timing-function:",a.Ui.easeOutCubic,";transition-property:opacity,transform;}"),b=(0,i.Z)("button",{target:"e1uzspzr2"})("position:relative;border-radius:",a.Dh[4],";"),h=(0,i.Z)("span",{target:"e1uzspzr1"})("display:block;position:relative;color:",a.$_.spaceMediumAlpha,";border-radius:",a.Dh[4],";background-color:",(function(e){return"danger"===e.variant?a.$_.mars:a.$_.titan}),";transition:background-color ",a.eR,";outline:0;font-size:0;line-height:0;&:first-of-type{margin-bottom:",a.Dh[4],";}"),v=(0,i.Z)("span",{target:"e1uzspzr0"})("visibility:hidden;pointer-events:none;position:absolute;right:100%;margin-right:",a.Dh[16],";margin-top:",a.Dh[8],";margin-bottom:",a.Dh[8],";top:0;bottom:0;align-items:center;white-space:nowrap;font-size:",a.JB[14],";font-weight:",a.Ue.semiBold,";opacity:0;transform:translate3d(-0.5rem, 0, 0);transition:all ",a.eR,";color:",a.$_.nova,";background-color:",a.$_.spaceLightAlpha,";border-radius:",a.q0.md,";padding:",a.Dh[8]," ",a.Dh[16],";span{display:inline-block;transform:translateY(1px);}button:hover &,button:focus &{visibility:visible;opacity:1;transform:translate3d(0, 0, 0);}");t.Z=function(e){var t=e.initialShow,n=void 0!==t&&t,r=(0,u.$G)().t,i=(0,o.useState)(n),a=i[0],m=i[1],j=(0,d.Z)();return(0,o.useEffect)((function(){var e=[];j&&document.querySelectorAll('[data-hide-feedback-widget="true"]').forEach((function(t){var n=new IntersectionObserver((function(e){m(!e.some((function(e){return e.isIntersecting})))}),{root:null,rootMargin:"-10px",threshold:.01});n.observe(t),e.push(n)}));return function(){return e.forEach((function(e){return e.disconnect()}))}}),[j]),(0,f.jsx)(c.Z,{children:function(e){var t=e.getToggleProps,n=e.setActiveView;return(0,f.jsx)(p,{style:{opacity:a?1:0,transform:a?"translate3d(0%,-50%,0)":"translate3d(100%,-50%,0)"},children:(0,f.jsxs)(b,g(g({},t({onClick:function(){return n(sessionStorage.getItem("positive_feedback_submitted")?"positive-confirm":"feedback")}})),{},{children:[(0,f.jsx)(h,{children:(0,f.jsx)(s.Y,{size:24})}),(0,f.jsx)(h,{variant:"danger",children:(0,f.jsx)(l._,{size:24})}),(0,f.jsx)(v,{children:(0,f.jsx)("span",{children:r("common:feedbackDialog.title")})})]}))})}})}},71102:function(e,t,n){var r=n(67294);t.Z=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}}}]);
//# sourceMappingURL=1314-33aac246106067e1.js.map